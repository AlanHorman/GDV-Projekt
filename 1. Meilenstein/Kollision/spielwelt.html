<!DOCTYPE html>
<html>
    <head>
        <title>Nimmersatt</title>
        <script src="..\..\Application\page\extern\three_js\build\three.min.js"></script>
        <script src="..\..\Application\page\extern\three_x\threex.keyboardstate.js"></script>
        <script src="..\..\Application\page\extern\three_x\THREEx.FullScreen.js"></script>
    </head>
    <body>
        <!--script src="..\..\Application\page\intern\steuerung.js"></script-->

        <script>

            /* 
            * To change this license header, choose License Headers in Project Properties.
            * To change this template file, choose Tools | Templates
            * and open the template in the editor.
            */

            var renderer	= new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild( renderer.domElement );

            var updateFcts	= [];
            var scene	= new THREE.Scene();
            var camera	= new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000 );
            camera.rotation.x = -1.15;
            camera.position.y = 33;
            camera.position.z = 12;

            //hinzuf√ºgen der Objekte

            var geometry	= new THREE.CubeGeometry( 1, 1, 1);
            var material	= new THREE.MeshBasicMaterial({color: 0x00ff00});
            var mesh	= new THREE.Mesh( geometry, material );
            
            
            var geometry1 = new THREE.PlaneGeometry(250, 100);
            var material1 = new THREE.MeshBasicMaterial({color: "rgb(145, 142, 145)", side: THREE.DoubleSide});
            var floor = new THREE.Mesh(geometry1, material1);
            
            var geometry2 = new THREE.BoxGeometry(70, 35, 2);
            var material2 = new THREE.MeshBasicMaterial({color: "rgb(255, 255, 255)"});
            var soil = new THREE.Mesh(geometry2, material2);

            var geometry3 = new THREE.BoxGeometry(70, 14, 1);
            var material3 = new THREE.MeshBasicMaterial({color: "rgb(10, 10, 10)"});
            var wall1 = new THREE.Mesh(geometry3, material3);
            var wall2 = new THREE.Mesh(geometry3, material3);

            var geometry4 = new THREE.BoxGeometry(1, 14, 35);
            var material4 = new THREE.MeshBasicMaterial({color: "rgb(34, 34, 34)"});
            var wall3 = new THREE.Mesh(geometry4, material4);
            var wall4 = new THREE.Mesh(geometry4, material4);

            scene.add( mesh ); 
             scene.add(soil);
            scene.add(floor);
            scene.add(wall1);
            scene.add(wall2);
            scene.add(wall3);
            scene.add(wall4);

            var light = new THREE.AmbientLight( 0x404040 ); // soft white light
            scene.add( light );

            // tastaturbewegung

            var keyboard	= new THREEx.KeyboardState(renderer.domElement);
            renderer.domElement.setAttribute("tabIndex", "0");
            renderer.domElement.focus();

            updateFcts.push(function(){
            if( keyboard.pressed('left') ){
            mesh.position.x -= 0.01;			
            }else if( keyboard.pressed('right') ){
            mesh.position.x += 0.01;
            }
            if( keyboard.pressed('down') ){
            mesh.position.z += 0.01;		
            }else if( keyboard.pressed('up') ){
            mesh.position.z -= 0.01;		
            }
            })

            //render
            updateFcts.push(function(){
            renderer.render( scene, camera );		
            })

            //loop runner
            var lastTimeMsec= null
            requestAnimationFrame(function animate(nowMsec){
            // keep looping
            requestAnimationFrame( animate );
            // measure time
            lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
            var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
            lastTimeMsec	= nowMsec

            // call each update function
            updateFcts.forEach(function(updateFn){
            updateFn(deltaMsec/1000, nowMsec/1000)
            })
            })


        
    </script>
    </body>

</html>

